!function i(n,s,a){function r(t,e){if(!s[t]){if(!n[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=s[t]={exports:{}},n[t][0].call(o.exports,function(e){return r(n[t][1][e]||e)},o,o.exports,i,n,s,a)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)r(a[e]);return r}({1:[function(e,t,o){!function(o){!function(){"use strict";var e,t=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},a="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null;const r=+("undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null).profile.id;(0,t.default)(function(){let s=(0,t.default)(".ps-js-profile-completeness");if(s.length){let o=s.find(".ps-js-status"),i=s.find(".ps-js-progressbar"),n=s.find(".ps-js-required");a.hooks.addAction("profile_completeness_updated","page_profile_about",(e,t={})=>{if(+e==r){let e=0;void 0!==t.profile_completeness&&(100<=+t.profile_completeness?(e++,o.hide(),i.hide()):(o.html(t.profile_completeness_message).show(),i.show(),i.children("span").css({width:`${+t.profile_completeness}%`}))),"undefined"!==t.missing_required&&(+t.missing_required<=0?(e++,n.hide()):n.html(t.missing_required_message).show()),2===e?s.hide():s.show()}})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){!function(t){!function(){"use strict";var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},r="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,o="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;(0,a.default)(function(){let i=(0,a.default)("input[name=verify_password]");if(i.length){let e=i.closest("form"),t=e.find("input[type=text], input[type=password]").not(i),o=e.find("[type=submit]");function n(){i.val().trim().length<5?(t.attr("readonly","readonly"),o.attr("disabled","disabled")):(t.removeAttr("readonly"),!function(){let e=!1;return t.each(function(){if(this.value!==(0,a.default)(this).data("ps-value"))return!(e=!0)}),e}()?o.attr("disabled","disabled"):o.removeAttr("disabled"))}t.each(function(){(0,a.default)(this).data("ps-value",this.value)}),t.filter("input[name=user_nicename]").on("input",function(){var e=this.value.replace(/[^a-z0-9-_\.@]/gi,"");this.value!==e&&(this.value=e)}),i.on("input",n),t.on("input",n),n()}}),(0,a.default)(function(){let s;(0,a.default)(".ps-js-profile-delete").on("click",e=>{e.preventDefault(),function(){s||(s=(0,r.dialog)(o.profile.template_profile_deletion,{destroyOnClose:!1}).show(),s.$el.find("form").on("submit",e=>e.preventDefault()),s.$el.find(".ps-js-cancel").on("click",()=>s.hide()),s.$el.find(".ps-js-submit").on("click",e=>function(e){let t=(0,a.default)(e).attr("disabled","disabled"),o=t.find(".ps-js-loading").show(),i=s.$el.find(".ps-js-error").hide(),n=s.$el.find("#ps-js-profile-deletion-pass").val();r.ajax.post("profile.delete_profile",{password:n}).then(e=>{e.success?e.data&&((0,r.dialog)(e.data.messages).show(),setTimeout(()=>window.location=e.data.url,3e3)):e.errors&&i.html(e.errors[0]).show()}).always(()=>{o.hide(),t.removeAttr("disabled")})}(e.currentTarget)),r.hooks.doAction("init_password_preview"));s.$el.find("#ps-js-profile-deletion-pass").val(""),s.$el.find(".ps-js-error").hide(),s.show()}()})}),(0,a.default)(function(){let n;function t(){let e=n.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=n.$el.find(".ps-js-error").hide(),o=n.$el.find("#ps-js-export-data-request-pass").val();r.ajax.post("profile.request_account_data",{password:o}).then(o=>{if(o.success){if(o.data){let e=n.title(),t=(0,r.dialog)(o.data.messages,{title:e});n.hide(),t.show(),setTimeout(()=>{window.location=o.data.url},3e3)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-request").on("click",e=>{e.preventDefault(),function(){n||(n=(0,r.dialog)(o.profile.template_export_data_request,{destroyOnClose:!1}).show(),n.$el.find(".ps-js-cancel").on("click",()=>n.hide()),n.$el.find(".ps-js-submit").on("click",()=>t()),n.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),r.hooks.doAction("init_password_preview"));n.$el.find("#ps-js-export-data-request-pass").val(""),n.$el.find(".ps-js-error").hide(),n.show()}()})}),(0,a.default)(function(){let n;function t(){let e=n.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=n.$el.find(".ps-js-error").hide(),o=n.$el.find("#ps-js-export-data-download-pass").val();r.ajax.post("profile.download_account_data",{password:o}).then(o=>{if(o.success){if(o.data){let e=n.title(),t=(0,r.dialog)(o.data.messages,{title:e});n.hide(),t.show(),setTimeout(()=>{t.hide(),window.location=o.data.url},1500)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-download").on("click",e=>{e.preventDefault(),function(){n||(n=(0,r.dialog)(o.profile.template_export_data_download,{destroyOnClose:!1}).show(),n.$el.find(".ps-js-cancel").on("click",()=>n.hide()),n.$el.find(".ps-js-submit").on("click",()=>t()),n.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),r.hooks.doAction("init_password_preview"));n.$el.find("#ps-js-export-data-download-pass").val(""),n.$el.find(".ps-js-error").hide(),n.show()}()})}),(0,a.default)(function(){let n;function t(){let e=n.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=n.$el.find(".ps-js-error").hide(),o=n.$el.find("#ps-js-export-data-delete-pass").val();r.ajax.post("profile.delete_account_data_archive",{password:o}).then(o=>{if(o.success){if(o.data){let e=n.title(),t=(0,r.dialog)(o.data.messages,{title:e});n.hide(),t.show(),setTimeout(()=>{window.location=o.data.url},3e3)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-delete").on("click",e=>{e.preventDefault(),function(){n||(n=(0,r.dialog)(o.profile.template_export_data_delete,{destroyOnClose:!1}).show(),n.$el.find(".ps-js-cancel").on("click",()=>n.hide()),n.$el.find(".ps-js-submit").on("click",()=>t()),n.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),r.hooks.doAction("init_password_preview"));n.$el.find("#ps-js-export-data-delete-pass").val(""),n.$el.find(".ps-js-error").hide(),n.show()}()})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){"use strict";e("./about"),e("./notifications"),e("./account")},{"./about":1,"./account":2,"./notifications":4}],4:[function(i,e,t){!function(o){!function(){"use strict";var a=t("undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null),e=t(i("promise/lib/es6-extensions")),r="undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null;function t(e){return e&&e.__esModule?e:{default:e}}let d=[],l=!1;const p=(t,o,i=!1)=>new e.default(e=>{e=[t,o,e,i];i?d.unshift(e):d.push(e),setTimeout(f,500)}),f=()=>{if(d.length&&!l){var o=d.shift(),i=o[0],n=o[1];let e=[o[2]];var s=o[3];let t={user_id:r.currentuserid,view_user_id:r.userid,fieldname:i,value:n};!s&&d.length&&(o=d.shift(),t.fieldname_extra=o[0],t.value_extra=o[1],e.push(o[2])),l=!0,peepso.postJson("profilepreferencesajax.save_notifications",t,t=>{l=!1,e.forEach(e=>e(t)),f()})}},u=(e=!0)=>{let t=(0,a.default)(".ps-js-preferences-header"),o=(0,a.default)(".ps-js-preferences-button").filter("[data-type=email]"),i=(0,a.default)(".ps-js-notification-option").find("span[data-type=email]");e?(t.parent(".ps-js-notification-option").show(),o.show(),i.show()):(t.parent(".ps-js-notification-option").hide(),o.hide(),i.hide())},c=e=>{let t=(0,a.default)(e),o=t.closest(".ps-preferences__checkbox").find("[type=checkbox]").not(t);o.length&&(o[0].checked===t[0].checked||("onsite"===(e=t.closest("span[data-type]").data("type"))&&!t[0].checked||"email"===e&&t[0].checked)&&o.trigger("click"))};(0,a.default)(function(){(0,a.default)(".ps-js-profile-list").on("change","[type=checkbox]",function(){let e=(0,a.default)(this),t=e.closest(".ps-js-notification-option").find(".ps-js-loading"),o=t.find("img"),i=t.find("i");i.stop().hide(),o.show(),p((0,a.default)(this).attr("name"),this.checked?1:0).then(function(){o.hide(),i.show().delay(800).fadeOut()}),c(this)});let n=(0,a.default)("select[name=email_intensity]");n.off("change.savepref"),n.on("change",function(){let o=this.value,e=n.next(".ps-js-loading"),t=e.find("img"),i=e.find("i");i.stop().hide(),t.show(),p("email_intensity",o,!0).then(e=>{if(t.hide(),i.show().delay(800).fadeOut(),e.success){let e=(0,a.default)("#peepso_email_intensity_descriptions").children(),t=e.filter("#peepso_email_intensity_"+o);t.length&&(e.not(t).hide(),t.show()),u(0==+o)}})}),n.length&&u(0==+n.val());let s=(0,a.default)("input[name=web_push]");s.off("change.savepref"),s.on("change",function(){var e=this.checked?1:0;let t=s.closest(".ps-preferences__notification").find(".ps-js-loading"),o=t.find("img"),i=t.find("i");i.stop().hide(),o.show(),p("web_push",e,!0).then(e=>{o.hide(),i.show().delay(800).fadeOut(),e.success&&setTimeout(function(){window.location.reload()},500)})}),(0,a.default)(".ps-preferences__checkbox").children("[data-type=onsite]").find("[type=checkbox]").each(function(){c(this)})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"promise/lib/es6-extensions":14}],5:[function(e,t,Y){!function(I){!function(){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=function(){w||(w=(0,i.dialog)(t.profile.template_avatar,{wide:!0,destroyOnClose:!1}).show(),v=w.$el,_=v.find(".ps-js-upload").on("click",P),y=function(){let e=(0,d.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-avatar-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:s,_wpnonce:r},dataType:"json",url:l,replaceFileInput:!1,add(e,t){let o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>n?$.html(f).show():($.hide(),t.submit()):$.html(p).show()},done(e,t){t=t.result;t.success?(F(t.data&&t.data.image_url,t.data&&t.data.orig_image_url),W=!0,q=!1,j.removeAttr("disabled")):t.errors&&$.html(t.errors[0]).show()}});return e}(),m=v.find(".ps-js-remove").on("click",V),g=v.find(".ps-js-gravatar").on("click",X),j=v.find(".ps-js-submit").on("click",z),b=v.find(".ps-js-btn-crop").on("click",E),x=v.find(".ps-js-btn-crop-cancel").on("click",U),k=v.find(".ps-js-btn-crop-save").on("click",J),$=v.find(".ps-js-error").hide(),Q=v.find(".ps-js-loading").hide(),D=v.find(".ps-js-has-avatar"),A=v.find(".ps-js-no-avatar"),M=v.find(".ps-js-original"),O=v.find(".ps-js-preview"),F.apply(null,u?[t.profile.img_avatar,t.profile.img_avatar_original]:[]),j.attr("disabled","disabled"));return w};var e,o,d=(e="undefined"!=typeof window?window.jQuery:void 0!==I?I.jQuery:null)&&e.__esModule?e:{default:e},i="undefined"!=typeof window?window.peepso:void 0!==I?I.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==I?I.peepsodata:null;const n=+peepsodata.upload_size,s=+t.profile.id,a=t.profile.img_avatar_default,r=t.profile.avatar_nonce,l=`${peepsodata.ajaxurl_legacy}profile.upload_avatar?avatar`,p=t.profile.text_error_filetype,f=t.profile.text_error_filesize;let u=+t.profile.has_avatar,c,h,w,v,_,y,m,g,j,b,x,k,$,Q,D,A,M,O,T,W=!1,q=!1,C=null;function F(e,t){var o;e?(m.show(),A.hide(),D.show(),o="?nocache-"+(new Date).getTime(),u=!0,c=e,O.attr("src",`${c}${o}`),t&&(h=t,M.attr("src",`${h}${o}`))):(m.hide(),D.hide(),A.show(),u=!1,c=a,h=null,O.attr("src",c),M.removeAttr("src")),b.show(),x.hide(),k.hide()}function P(e){e.preventDefault(),y[0].value=null,y.trigger("click")}function V(e){e.preventDefault();e={user_id:s,_wpnonce:r};i.ajax.post("profile.remove_avatar",e).then(e=>{e.success&&(F(null),w.hide(),W=!1,j.attr("disabled","disable"),i.hooks.doAction("profile_avatar_updated",s,a))})}function X(e){e.preventDefault();e={user_id:s,_wpnonce:r};i.ajax.post("profile.use_gravatar",e).then(e=>{e.success&&(F(e=e.data&&e.data.image_url,e),W=!0,q=!0,j.removeAttr("disabled"))})}function z(e){var t;e.preventDefault(),o||(W?(t={user_id:s,use_gravatar:q?1:0,_wpnonce:r},o=!0,i.ajax.post("profile.confirm_avatar",t).then(e=>{e.success&&(e=e.data&&e.data.image_url,w.hide(),W=!1,j.attr("disabled","disabled"),i.hooks.doAction("profile_avatar_updated",s,e))}).always(function(){o=!1})):C?(t=d.default.extend(C,{user_id:s,_wpnonce:r},{tmp:"",preview:""}),o=!0,i.ajax.post("profile.crop",t).then(e=>{e.success&&(e.data&&e.data.image_url,w.hide(),window.location.reload(!0))}).always(function(){o=!1})):w.hide())}function E(e){e.preventDefault(),window.ps_crop.init({elem:M,change:e=>{T=function(e,t){let o=(0,d.default)(e),i=1,n=!1,s,a,r;e.naturalWidth&&(s=e.naturalWidth||o.width(),a=e.naturalHeight||o.height(),(800<s||800<a)&&(i=800/Math.max(s,a),s*=i,a*=i,n=!0),i=s/o.width());r={x1:Math.floor(i*t.x),y1:Math.floor(i*t.y),x2:Math.floor(i*(t.x+t.width)),y2:Math.floor(i*(t.y+t.height))},n&&(r.width=s,r.height=a);return r}(M[0],e)}}),b.hide(),x.show(),k.show()}function U(e){e.preventDefault(),window.ps_crop.detach(M),b.show(),x.hide(),k.hide()}function J(e){e.preventDefault(),window.ps_crop.detach(M),b.show(),x.hide(),k.hide();let t={x:T.x1,y:T.y1,x2:T.x2,y2:T.y2,width:T.width,height:T.height};W?t.tmp=1:t.preview=1;e=d.default.extend(t,{user_id:s,_wpnonce:r});i.ajax.post("profile.crop",e).then(e=>{e.success&&(F(e.data.image_url),W||(C=t,j.removeAttr("disabled")))})}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(r,e,t){!function(i){!function(){"use strict";var e=o("undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null),n="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==i?i.peepsodata:null,s=o(r("./avatar-dialog"));function o(e){return e&&e.__esModule?e:{default:e}}const a=+t.profile.id;(0,e.default)(function(){let t=(0,e.default)(".ps-js-focus--profile .ps-js-avatar");if(t.length){let o=t.find(".ps-js-avatar-image"),i=t.find(".ps-js-avatar-button-wrapper");n.hooks.addAction("profile_avatar_updated","page_profile",(e,t)=>{+e==a&&o.attr("src",t),t.match(/\/users\/\d+\//)?(i.css("cursor",""),i.attr("onclick",`peepso.simple_lightbox('${t.replace("-full.","-orig.")}'); return false`)):(i.css("cursor","default"),i.removeAttr("onclick"))});let e=t.find(".ps-js-avatar-button");e.on("click",e=>{e.preventDefault(),e.stopPropagation(),(0,s.default)().show()})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":5}],7:[function(e,t,o){!function(t){!function(){"use strict";var e,f=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},u="undefined"!=typeof window?window._:void 0!==t?t._:null,c="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var o,i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var s;"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((s=n?Object.getOwnPropertyDescriptor(e,o):null)&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o])}i.default=e,t&&t.set(e,i);return i}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}const w=window.Hammer,v=+h.default.upload_size,_=+h.profile.id,y=h.profile.img_cover_default,m=h.profile.cover_nonce,g=`${h.default.ajaxurl_legacy}profile.upload_cover?cover`,j=h.profile.text_error_filetype,b=h.profile.text_error_filetype;let x=+h.profile.has_cover,k;(0,f.default)(function(){let t=(0,f.default)(".ps-js-focus--profile .ps-js-cover");if(!t.length)return;(0,f.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),o[0].value=null,o.trigger("click")});let o=function(){let e=(0,f.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-cover-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:_,_wpnonce:m},dataType:"json",url:g,replaceFileInput:!1,add(e,t){let o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>v?alert(b):(d.css("opacity",.5),t.submit()):alert(j)},done(e,t){var o=t.result;o.success?(t=o.data.image_url,i.show(),n.show(),x=!0,d.attr("style","").attr("src",t+"?"+Math.random()).one("load",s),c.hooks.doAction("profile_cover_updated",_,t)):o.errors&&alert(o.errors)}});return e}(),i=(0,f.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();let t=(0,c.dialog)(h.profile.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",()=>t.hide()),t.$el.on("click",".ps-js-submit",()=>{t.hide(),d.css("opacity",.5);var e={uid:h.currentuserid,user_id:_,_wpnonce:m};c.ajax.post("profile.remove_cover_photo",e).then(e=>{e.success&&(i.hide(),n.hide(),x=!1,d.attr("style","").attr("src",y).one("load",s),c.hooks.doAction("profile_cover_updated",_,y))})})}),n=(0,f.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),d.data("style",d.attr("style")),d.css("z-index",1),t.addClass("ps-focus-cover-edit"),a.show();let n=r.width()-d.width(),s=r.height()-d.height();d.off("mousedown").on("mousedown",function(e){e.preventDefault()}),void 0!==w&&(k=new w.Manager(d[0]),k.add(new w.Pan({direction:w.DIRECTION_ALL,treshhold:0})),k.on("pan panstart panend",o=>{o.srcEvent.stopPropagation(),o.srcEvent.preventDefault();let i=(0,f.default)(o.target);if("panstart"===o.type)i.data("position",i.position()),i.css("cursor","move");else if("pan"===o.type){let e=i.data("position"),t={top:o.deltaY,left:o.deltaX};t.left=Math.max(t.left,n-e.left),t.left=Math.min(t.left,0-e.left),t.top=Math.max(t.top,s-e.top),t.top=Math.min(t.top,0-e.top),i.css("transform",`translate3d(${t.left}px, ${t.top}px, 0)`)}else{var e=i.position(),o=100*e.left/r.width(),e=100*e.top/r.height(),o=Math.ceil(1e4*o)/1e4,e=Math.ceil(1e4*e)/1e4;i.css({top:`${e}%`,left:`${o}%`,transform:""}),i.removeData("position"),i.data({reposX:o,reposY:e}),i.css("cursor","")}}))}),a=(0,f.default)(".ps-js-cover-reposition-actions").hide(),r=((0,f.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),k.destroy(),k=null,t.removeClass("ps-focus-cover-edit"),a.hide(),d.css("z-index",""),d.attr("style",d.data("style")).removeData("style")}),(0,f.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),k.destroy(),k=null,t.removeClass("ps-focus-cover-edit"),a.hide(),d.css("z-index","");e={user_id:_,_wpnonce:m,y:d.data("reposX"),x:d.data("reposY")};c.ajax.post("profile.reposition_cover",e)}),t.find(".ps-js-cover-wrapper")),d=t.find(".ps-js-cover-image");x||(n.hide(),i.hide());let s=()=>{d.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});let e=r.height(),t=r.width(),o=d.height(),i=d.width();o<e&&(d.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),o=d.height(),i=d.width());var n=parseFloat(d[0].style.top)||0;o>=e&&n<(s=(o-e)/e*-100)&&d.css("top",`${s}%`);var s,n=parseFloat(d[0].style.left)||0;i>=t&&n<(s=(i-t)/t*-100)&&d.css("left",`${s}%`),d.css("opacity","")};s=(0,u.throttle)(s,500),d.each(function(){let e=new Image;e.onload=s,e.src=this.src});let l;c.hooks.addAction("browser_resize","profile_cover",e=>{l&&l===e.width||(l=e.width,s())});let p=(0,f.default)(".ps-js-cover-button-popup");p.on("click",function(t){if(t.currentTarget===t.target){let e=(0,f.default)(this);t=e.data("cover-url");t&&peepso.simple_lightbox(t)}}),c.hooks.addAction("profile_cover_updated","page_profile",(e,t)=>{+e==_&&(-1<t.indexOf(`/users/${e}/`)?(p.css("cursor","pointer"),p.data("cover-url",t)):(p.css("cursor",""),p.removeData("cover-url")))})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){"use strict";e("./avatar"),e("./cover")},{"./avatar":6,"./cover":7}],9:[function(e,t,o){"use strict";e("./header"),e("./profile"),e("./about"),e("./profile-extended")},{"./about":3,"./header":8,"./profile":11,"./profile-extended":10}],10:[function(e,t,o){"use strict";jQuery(function(o){var i=".ps-js-profile-separator",e=o(".ps-js-profile-list");e.length&&e.find(i).closest(".ps-js-profile-item").each(function(){var e=o(this),t=e.next();return!t.length||t.find(i).length?(e.remove(),!0):void 0})})},{}],11:[function(e,t,o){!function(o){!function(){"use strict";"undefined"!=typeof window||void 0!==o&&o.peepso;function e(){this.cover={},this.cover.x_position_percent=0,this.cover.y_position_percent=0,this.$cover_ct=jQuery(".js-focus-cover"),this.$cover_image=jQuery("img#"+peepsodata.userid),this.initial_cover_position=this.$cover_image.attr("style"),this.avatar_use_gravatar=!1}var t=window.profile=new e;e.prototype.init=function(){var e=jQuery(".js-collapse-about-btn");0!==e.length&&e.on("click",function(e){e.preventDefault();e=jQuery(".js-collapse-about");"none"===e.css("display")?e.show():e.hide()}),jQuery(".js-focus-cover").hover(function(){!1===pswindow.is_visible&&jQuery(".js-focus-change-cover").show()},function(){jQuery(".js-focus-change-cover").hide()}),jQuery(".ps-tab__bar").unbind("click");e=jQuery(".ps-js-page-about-preferences");e.length&&(e.find("input[type=checkbox]").on("click.savepref",t.save_preference),e.find("select").on("change.savepref",t.save_preference),e.find(".ps-js-dropdown input[type=hidden]").on("change",t.save_preference),e.find(".ps-preferences__checkbox").find("input[type=checkbox]").off("click.savepref"));e=jQuery(".ps-js-profile-item");e.length&&e.each(function(){var e,t=jQuery(this);t.find(".peepso-markdown").length&&(e=peepso.observer.applyFilters("peepso_parse_content",t.html()),t.html(e))})},e.prototype.activate_tab=function(e,t,o){return e.preventDefault(),jQuery(e.target).addClass("active").siblings("[data-toggle=tab]").removeClass("active"),jQuery(o).hide(),jQuery(t).show(),!1},e.prototype.new_like=function(){return peepso.postJson("profile.like",{user_id:peepsodata.userid},function(e){var t,o;e.success?(t=(o=e.data||{}).html,o=o.like_count,jQuery(".ps-js-focus-interactions").html(t),void 0!==o&&peepso.observer.doAction("profile_update_like",peepsodata.userid,o)):psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)}),!1},e.prototype.unblock_user=function(t,e){this.unblocking_user||(e&&(e=jQuery(e)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:t},this.unblocking_user=!0,peepso.postJson("activity.unblockuser",e,jQuery.proxy(function(e){this.unblocking_user=!1,e.success&&(jQuery(".ps-js-focus--"+t).find(".ps-js-focus-actions").html(e.data.actions),psmessage.show(e.data.header,e.data.message,psmessage.fade_time))},this)))},e.prototype.delete_profile=function(){var e=jQuery("#profile-delete-title").html(),t=jQuery("#profile-delete-content").html();pswindow.show(e,t)},e.prototype.delete_profile_action=function(){$req={};var e={uid:peepsodata.currentuserid};peepso.postJson("profile.delete_profile",e,function(e){e.success?window.location=e.data.url:psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)})},e.prototype.field_changed=function(e,t){e=jQuery(e).data("id");return this.field_changed_list||(this.field_changed_list=[]),-1===this.field_changed_list.indexOf(e)&&this.field_changed_list.push(e),this.change_beforeunload(),!0},e.prototype.change_beforeunload=function(){var e;this.onbeforeunload_changed||((e=this).onbeforeunload_changed=window.onbeforeunload||function(){},window.onbeforeunload=function(){return e.save_field_saving?peepsodata.profile_saving_notice||"The system is currently saving your changes.":e.field_changed_list.length?peepsodata.profile_unsaved_notice||"There are unsaved changes on this page.":void 0})},e.prototype.change_privacy=function(e){var t=jQuery(e),o=t.closest(".ps-js-dropdown"),i=o.find(".ps-js-dropdown-toggle"),n=o.find("input[type=hidden]"),s={},a="[class*=gci-]",r=".ps-privacy-title",d=n.data("id"),l=(n.val(),i.find(a).attr("class")),p=i.find(r).html(),f=t.data("optionValue"),e=t.find(a).attr("class"),o=t.find("span").html();t.parent().children("[data-option-value]").each(function(){var e=jQuery(this),t=e.data("optionValue"),e=e.find(a).attr("class");s[t]=e}),i.find(a).attr("class",e),i.find(r).html(o),peepso.postJson("profilefieldsajax.save_acc",{user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:d,acc:f},function(e){e.success?n.val(f):(i.find(a).attr("class",l),i.find(r).html(p))})},e.prototype.use_gravatar=function(){var i=this;peepso.postJson("profile.use_gravatar",{},function(e){var t,o;e.success&&(t=jQuery("#dialog-upload-avatar-content",jQuery(e.data.html)),o=jQuery("#dialog-upload-avatar .dialog-action").html(),Math.random(),e=(e=e.data.image_url)+(0<=e.indexOf("?")?"&rand=":"?rand=")+Math.random(),jQuery(".js-focus-avatar img",t).attr("src",e),jQuery(".imagePreview img",t).attr("src",e),jQuery(".imagePreview",t).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",t).show(),jQuery(".ps-js-no-avatar",t).hide(),jQuery(".ps-js-crop-avatar",t).hide(),pswindow.set_content(t),pswindow.set_actions(o),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),i.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),i.invalid_avatar_upload=!1,i.avatar_use_gravatar=!0)})},e.prototype.save_preference=function(e){var t=jQuery(e&&e.target?e.target:e),o=t.closest(".ps-js-profile-preferences-option").find(".ps-js-loading"),e={};e.user_id=peepsodata.currentuserid,e.view_user_id=peepsodata.userid,e.meta_key=t.attr("name"),e.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),o.find("i").stop().hide(),o.find("img").show(),peepso.postJson("profilepreferencesajax.savepreference",e,function(e){o.find("img").hide(),o.find("i").show().delay(800).fadeOut()})},e.prototype.save_notification=function(e){var t=jQuery(e&&e.target?e.target:e),o=t.closest(".ps-js-notification-option").find(".ps-js-loading"),e={};e.user_id=peepsodata.currentuserid,e.view_user_id=peepsodata.userid,e.fieldname=t.attr("name"),e.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),o.find("i").stop().hide(),o.find("img").show(),peepso.postJson("profilepreferencesajax.save_notifications",e,function(e){o.find("img").hide(),o.find("i").show().delay(800).fadeOut(),e.success})},jQuery(function(){t.init()})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,u,t){!function(f){!function(){"use strict";function e(e){i.length||(t(),0),i[i.length]=e}u.exports=e;var t,i=[],n=0;function o(){for(;n<i.length;){var e=n;if(n+=1,i[e].call(),1024<n){for(var t=0,o=i.length-n;t<o;t++)i[t]=i[t+n];i.length-=n,n=0}}i.length=0,n=0,0}var s,a,r,d=void 0!==f?f:self,l=d.MutationObserver||d.WebKitMutationObserver;function p(i){return function(){var e=setTimeout(o,0),t=setInterval(o,50);function o(){clearTimeout(e),clearInterval(t),i()}}}t="function"==typeof l?(a=1,s=new l(s=o),r=document.createTextNode(""),s.observe(r,{characterData:!0}),function(){a=-a,r.data=a}):p(o),e.requestFlush=t,e.makeRequestCallFromTimer=p}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,o){"use strict";var n=e("asap/raw");function a(){}var s=null,r={};function d(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==a&&c(e,this)}function l(e,t){for(;3===e._V;)e=e._W;if(d._Y&&d._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);var o,i;o=e,i=t,n(function(){var e=1===o._V?i.onFulfilled:i.onRejected;null!==e?(e=function(e,t){try{return e(t)}catch(e){return s=e,r}}(e,o._W))===r?f(i.promise,s):p(i.promise,e):(1===o._V?p:f)(i.promise,o._W)})}function p(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself.")),0;if(t&&("object"==typeof t||"function"==typeof t)){var o=function(e){try{return e.then}catch(e){return s=e,r}}(t);if(o===r)return f(e,s),0;if(o===e.then&&t instanceof d)return e._V=3,e._W=t,void i(e);if("function"==typeof o)return void c(o.bind(t),e)}e._V=1,e._W=t,i(e)}function f(e,t){e._V=2,e._W=t,d._Z&&d._Z(e,t),i(e)}function i(e){if(1===e._U&&(l(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)l(e,e._X[t]);e._X=null}}function u(e,t,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=o}function c(e,t){var o=!1,e=function(e,t,o){try{e(t,o)}catch(e){return s=e,r}}(e,function(e){o||(o=!0,p(t,e))},function(e){o||(o=!0,f(t,e))});o||e!==r||(o=!0,f(t,s))}(t.exports=d)._Y=null,d._Z=null,d._0=a,d.prototype.then=function(e,t){if(this.constructor!==d)return n=e,s=t,new(i=this).constructor(function(e,t){var o=new d(a);o.then(e,t),l(i,new u(n,s,o))});var i,n,s,o=new d(a);return l(this,new u(e,t,o)),o}},{"asap/raw":12}],14:[function(e,t,o){"use strict";var d=e("./core.js");t.exports=d;var i=p(!0),n=p(!1),s=p(null),a=p(void 0),r=p(0),l=p("");function p(e){var t=new d(d._0);return t._V=1,t._W=e,t}d.resolve=function(e){if(e instanceof d)return e;if(null===e)return s;if(void 0===e)return a;if(!0===e)return i;if(!1===e)return n;if(0===e)return r;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new d(t.bind(e))}catch(o){return new d(function(e,t){t(o)})}return p(e)};var f=function(e){return"function"==typeof Array.from?(f=Array.from,Array.from(e)):(f=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};d.all=function(e){var r=f(e);return new d(function(n,s){if(0===r.length)return n([]);var a=r.length;for(var e=0;e<r.length;e++)!function t(o,e){if(e&&("object"==typeof e||"function"==typeof e)){if(e instanceof d&&e.then===d.prototype.then){for(;3===e._V;)e=e._W;return 1===e._V?t(o,e._W):(2===e._V&&s(e._W),void e.then(function(e){t(o,e)},s))}var i=e.then;if("function"==typeof i)return void new d(i.bind(e)).then(function(e){t(o,e)},s)}r[o]=e,0==--a&&n(r)}(e,r[e])})},d.reject=function(o){return new d(function(e,t){t(o)})},d.race=function(e){return new d(function(t,o){f(e).forEach(function(e){d.resolve(e).then(t,o)})})},d.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":13}]},{},[9]);